 /*!
 * Color.js
 * Javascript class for working with colors.
 *
 * by Adam Drago
 */
(function(){this.Color=function(e){this.set(e)};Color.prototype={hsva:[],getRgb:function(){var e=this.getHsv();return e===null?null:o(e)},getRgba:function(){var e=this.getHsva();return e===null?null:f(e)},getHex:function(e){var t=this.getHsv();return t===null?null:hsvToHex(t)},getHsv:function(){var e=this.getHsva();return e===null?null:e.slice(0,3)},getHsva:function(){return this.hsva||null},set:function(e){if(e&&(e.hsv||e.hsva||e.rgb||e.rgba||e.hex)){if(e.hsv){this.hsva=hsvToHsva(e.hsv)}else if(e.hsva){this.hsva=e.hsva}else if(e.rgb){this.hsva=rgbToHsva(e.rgb)}else if(e.rgba){this.hsva=a(e.rgba)}else if(e.hex){this.hsva=hexToHsva(e.hex)}}else if(t(e)){if(e.length===3){this.hsva=rgbToHsva(e)}else{this.hsva=a(e)}}else if(n(e)){if(e[0]=="r"){if(e[3]!="a"){this.hsva=a(i(rgbToRgba(e.substring(4,e.length-1).split(",")),function(e){return+e}))}else{this.hsva=a(i(e.substring(5,e.length-1).split(","),function(e){return+e}))}}else{this.hsva=hexToHsva(e)}}else{this.hsva=[0,0,0,0]}return this}};var e=function(e){return Object.prototype.toString.call(e)},t=function(t){return e(t)==="[object Array]"},n=function(t){return e(t)==="[object String]"},r=function(e){return e===void 0},i=function(e,t){for(var n=0;n<e.length;n++){e[n]=t(e[n])}return e},s=function(e,t,n){while(e.length<t){e=n+e}return e},o=function(e){var t,n,r,i=e[0],s=e[1],o=e[2],u=Math.floor(i*6),a=i*6-u,f=o*(1-s),l=o*(1-a*s),c=o*(1-(1-a)*s);switch(u%6){case 0:t=o,n=c,r=f;break;case 1:t=l,n=o,r=f;break;case 2:t=f,n=o,r=c;break;case 3:t=f,n=l,r=o;break;case 4:t=c,n=f,r=o;break;case 5:t=o,n=f,r=l;break}return[Math.floor(t*255),Math.floor(n*255),Math.floor(r*255)]},u=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.max(t,n,r),s=Math.min(t,n,r),o=0,u=i,a=i-s,f=i==0?0:a/i;if(i==s){o=0}else{switch(i){case t:o=(n-r)/a+(n<r?6:0);break;case n:o=(r-t)/a+2;break;case r:o=(t-n)/a+4;break}o/=6}return[o,f,u]},a=function(e){var t=r(e[3])?1:e[3],n=u(e);n.push(t);return n},f=function(e){var t=r(e[3])?1:e[3],n=o(e);n.push(t);return n};rgbToHsva=function(e){var t=u(e);t.push(1);return t},rgbToHex=function(e){return s(e[0].toString(16),2,"0")+s(e[1].toString(16),2,"0")+s(e[2].toString(16),2,"0")},hexToRgba=function(e){e=fixHex(e);return[parseInt(e.substr(0,2),16),parseInt(e.substr(2,2),16),parseInt(e.substr(4,2),16)]},hexToHsv=function(e){return u(hexToRgba(fixHex(e)))},hexToHsva=function(e){var t=hexToHsv(e);t.push(1);return t},hsvToHex=function(e){return rgbToHex(o(e))},hsvToHsva=function(e){if(e.length==3){e.push(1)}return e},rgbaToRgb=function(e){e.pop();return e},rgbToRgba=function(e){if(e.length==3){e.push(1)}return e},fixHex=function(e){e=e[0]=="#"?e.substring(1):e;return e.length==3?e[0]+e[0]+e[1]+e[1]+e[2]+e[2]:e};Color.hsvToRgb=o;Color.rgbToHsv=u;Color.rgbaToHsva=a;Color.rgbToHsva=rgbToHsva;Color.rgbToHex=rgbToHex;Color.hexToRgba=hexToRgba;Color.hexToHsv=hexToHsv;Color.hexToHsva=hexToHsva;Color.hsvToHex=hsvToHex;Color.hsvToHex=hsvToHsva;Color.hsvaToRgba=f;Color.rgbaToRgb=rgbaToRgb;Color.rgbToRgba=rgbToRgba;Color.fixHex=fixHex}).call(this);